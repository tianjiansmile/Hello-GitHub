风控建模

1. 什么是信用评分
	信用评分就是衡量你的信用程度的量化指标，这样听起来是不是很拗口？说简单点，就是一个分数，
	由你填写的个人信息以及一些第三方数据计算得来的，例如支付宝的芝麻信用、腾讯的腾讯信用、美国的FICO评分等。
	这些评分就可以决定你的信用等级，从而让贷款机构决定放不放款
2. 常用的模型
	业界常说的有A卡、B卡、C卡，A卡就是申请评分卡。在你申请的时候就会站出来，决定放不放款，
	B卡，也就是贷中行为评分卡，监控你的信用状况，决定给不给你提额度，或者中不中断你的贷款，
	C卡就是贷后评分卡，一般有三种：账龄迁移模型、还款率模型和失联预警模型。
	
	迁移模型、还款率模型和失联预警模型。 
	账龄迁移：就是预测你的逾期状况会不会从M1迁移到M2（关于m1，m2定义查看文末解释） 
	失联预警模型：对于银行和贷款公司来讲，有时不怕你不还钱，如果逾期了还能对你进行罚息等方式再赚一笔，
	              更怕的反而客户失联，彻底消失，所以就需要建立失联预警，看一看你未来有没有可能失联。 
	还款率模型：注意这个模型不是为了预测你还不还钱，而是预测未来经过催收动作后，还款的概率。
	            毕竟贷后催收，是需要人力、物力成本的，如果一个人简单催一催，例如发个短信，打个电话就还了，
				何必动用戴金链子的老铁们上门，出于平衡成本的需要，制定不同的催收套路，这个模型就可以起作用了。
3 概念解析：M0,M1,M2的定义
	这三个不是简简单单的月份的概念，具体定义如下：

	M0:最后还款日的第二天到下一个账单日
	M1:M0时段的延续,即在未还款的第二个账单日到第二次账单的最后还款日之间
	M2:M1的延续,即在未还款的第三个账单日到第三次账单的最后还款日之间
	所谓账单日，就是银行会对你的当期应还款形成账单并通知你，账单形成日即为账单日。，同时，银行不会要求你马上就还款，而是会给你一个缓冲期，通常是20天（具体根据各银行制定标准），该期限截止日即为还款到期日。这20天之内全额还款或是选择信用卡最低还款额方式还款，可以享受免息待遇，但如果逾期，就会计息了。

	这些概念看起来是不是很难懂，这样，我举个例子你就明白了，就拿我的招行信用卡来说的吧。还款日是每个月4号，帐单日是每个月16号。 
	假如我在1月16号前消费了500块，那么一月帐单日，也就是1月16日账单金额就是500，还款到期日就是2月4号。缓冲期就是1月16日–2月4日，一共19天，如果在这期间我还清了账单，就不会有利息。 
	所谓的M0就是2月5号到下个月账单日—-3月16日期间我不还清账单，也就是产生了M0逾期。 
	假如我继续不还，也就是3月16号我还拖着，直接延伸到M1，那么M1就是3月16日到4月4日。 
	如果到了M1依然不还钱，第三个账单日就是4月16号，M2就是4月16日到5月4日。
	
WOE：god(i)/god(sum)/bad(i)/bad(sum)
具体参考小象课程第三课文档
	
建模过程：
   1. 数据读入
   2. 数据概览
   3. 数据转换
       文本转数字
   4. 数据处理
       缺失值，异常值的处理
   5. 数据切分
       train，test
   6. 数据分箱
      卡方分箱，数据转换WOE，VI值
   
   7. 训练模型
       选择模型，
   
   8. 验证模型
      AUC，KS ROC 等
   
   9 信用评分
   
分箱过程
   在实际的工作中，特征数据情况复杂，按照数据的类型看，包含比如日期类型，文字类型，数值类型等变量，按照某一个变量的离散情况，又分为离散变量和连续变量。
   我们一般定义分箱数为5箱，也就是说最后每一个变量的数据都转换为小于等于5类的数据分别放在5个分箱里面，并且每一个分箱里面的标签都同时包含了好坏样本。
   1. 检查变量的数值类型，将大于5类小于5类的变量区分出来。
      如果var<5时，分别遍历每一个var中的每一类数据是否都同时包含好换样本。
	        如果 某一个变量的某一类数据所对应的标签全是坏的或好的。
			     合并这个变量其中的两类数据，进而保证同时包含好坏样本，比如v1这个变量有3种数值1，2,3 但是1这一类数据对应的标签全是好或是坏，这时候就需要把1合并掉
			如果同时都包含，不用合并。
	  如果var>5时，直接进行卡方分箱，默认先分为5箱，分完之后检查每个变量的每一箱是否满足bad rate就是好坏都存在，
	        如果不满足bad rate
			     继续分箱，分箱个数变为4个，然后检查bad rate，知道每箱bad rate 满足条件，当只剩两个分箱的时候必然是单调的
				 
   2. WOE编码，VI值计算
      将每一个分箱里面的每一个变量的数据转换为WOE值，第i个分箱中该变量的某一个数据 WOE = god(i)/god(sum)/bad(i)/bad(sum)， 分子分母都不能为0，这就是为什么要保证每一个分箱的单调性
	  WOE其实是表征了某一个分箱的某一个变量两类样本分布的差异性
	      比如 某个分箱某个变量： good；0.8  good；0.2  good；0.1
		                          bad   0.2  bad   0.2  bad   0.2
								  WOE    4          1         0.5
	  VI值是特征信息读，表征了这个分箱的区分能力 good - bad 
	  作用: 用来挑选变量
	        1 高VI值表征了该特征与目标变量关联度高
			2 目标变量只能是二分类
			3 过高的VI值有潜在的风险
			4 0.02-0.1 预测性弱 0.1-0.2 一定的预测性  0.2+ 高预测性
			
			
验证模型 
   KS： 模型区分度
   阀值： >0.3 好用 0.2-0.3 可用 0-0.2 较差  < 0 模型有错误
   
   AUC： 模型准确度
   阀值： >0.7 区分度高 0.6-0.7 有一定的区分度  0.5-0.6 区分度较弱   <0.5 基本和瞎猜没啥区别
	  
